<!DOCTYPE html>
<html lang="en">
	<%- include ('../partials/head-edits.ejs') %>

	<body>
		<% if (user) { %> <%- include ('../partials/tarifas/sidebar-tarifas.ejs') %>

		<!-- NAV LG -->
		<nav class="navbar fixed-top navi">
			<div class="container-fluid">
				<span class="navbar-brand mb-0 h1 text-uppercase" id="navbarLG"
					>TARIFAS - Huésped del hotel
				</span>
				<%- include ('../partials/tarifas/navbar-lg-tar.ejs') %>
			</div>
		</nav>

		<!-- NAV SM -->
		<nav class="navbar navSmall fixed-top">
			<%- include ('../partials/tarifas/navbar-sm-tar.ejs') %>
		</nav>
		<% } %>

		<div class="content">
			<div class="row afterNav">
				<div class="col-3">
					<img src="/img/hrlogo.png" class="logoHotelrate" alt="" />
					<h3 class="headerSmall text-uppercase" id="titulo">
						TARIFAS - Huésped del hotel
					</h3>
				</div>

				<div class="col" id="inputBuscar">
					<form role="search" class="vertical-center">
						<div class="input-group">
							<span class="input-group-text" id="basic-addon1"
								><i class="bi bi-search"></i
							></span>
							<input
								class="form-control"
								type="search"
								id="myInput"
								onkeyup="filtroBusqueda(0.6)"
								placeholder="Buscar tarifa"
								aria-label="Search" />
						</div>
					</form>
				</div>
			</div>

			<div class="card editShadow mt-4 tabla-desktop">
				<div class="card-body">
					<table class="table table-hover" id="myTable">
						<thead id="tabla-vacia">
							<tr>
								<th scope="col" class="col-4">Nombre</th>
								<th scope="col" class="col">Precio USD</th>
								<th scope="col" class="col">Cod. Opera</th>
								<th scope="col" class="col-5">Descripción</th>
							</tr>
						</thead>
						<tbody>
							<% results.forEach((hotel) => { %>
							<tr
								class="info"
								onclick="alert('- <%= hotel.nombre %> -\n\n <%= hotel.tips %>')">
								<td>
									<%= hotel.nombre %>
									<div class="verInfo">
										- Ver Info
										<i class="bi bi-info-circle"></i>
									</div>
								</td>
								<td><%= hotel.precio%>.00</td>
								<td><%= hotel.cod_opera%></td>
								<% if(hotel.tips.length > 50) { %>
								<td><%= hotel.tips.slice(0,50) %>...</td>

								<% } else { %>
								<td data-titulo="descrip:"><%= hotel.tips %></td>
								<% } %>
							</tr>
							<% }) %>
						</tbody>
					</table>
				</div>
			</div>

			<!-- *****************************MOBILE CARDS EDIT****************************** -->
			<div class="container tabla-mobile" id="tabla-mobile">
				<div
					class="row row-cols-1 row-cols-sm-1 row-cols-md-3 mt-3"
					id="servicesHomePage">
					<% results.forEach((hotel) => { %>
					<div class="col">
						<div class="card cardHome mb-4 cardShadow" id="serviceTest">
							<div class="card-header fixSizeHead">
								<div class="card-title my-0 text-center">
									<%= hotel.nombre %>
								</div>
							</div>
							<div class="card-body">
								<h5
									class="card-title pricing-card-title text-center precio-tur">
									USD <%= hotel.precio %>.00
									<small class="text-muted">p/p</small>
								</h5>
								<div class="text-center">
									<h6>
										Código de Opera:
										<strong><%= hotel.cod_opera %></strong>
									</h6>
									<div class="accordion" id="accordionFlushExample">
										<div class="accordion-item">
											<h2 class="accordion-header" id="flush-headingOne">
												<button
													class="accordion-button collapsed"
													type="button"
													data-bs-toggle="collapse"
													data-bs-target="#flush-collapseOne<%= hotel.id %>"
													aria-expanded="false"
													aria-controls="flush-collapseOne">
													Más información
												</button>
											</h2>
											<div
												id="flush-collapseOne<%= hotel.id %>"
												class="accordion-collapse collapse"
												aria-labelledby="flush-headingOne"
												data-bs-parent="#accordionFlushExample">
												<div class="accordion-body"><%= hotel.tips %></div>
											</div>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
					<% }) %>
				</div>
			</div>

			<div class="form-center botonReload">
				<a class="btn btn-danger" href="/tarifas" id="backRates">
					Cambiar tipo cliente</a
				>
			</div>
		</div>

		<%- include ('../partials/footer.ejs') %>
	</body>
</html>
